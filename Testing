import pyvista as pv
import numpy as np
import os

# Ensure directory
os.makedirs("gifs", exist_ok=True)

plotter = pv.Plotter()

# Add initial mesh
sphere = pv.Sphere()
plotter.add_mesh(sphere)

# Start recording BEFORE entering show
plotter.open_gif("gifs/test.gif")

# Open window in non-blocking mode
plotter.show(interactive_update=True)   # <--- use interactive_update instead!

# Animate
for i in range(20):
    sphere.points *= 1.01
    plotter.render()
    plotter.write_frame()   # works now!
